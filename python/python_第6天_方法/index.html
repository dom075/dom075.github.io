<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.73.0" />

  <title>Python 第6天 方法 &middot; Jed Wu</title>

  <meta name="description" content="" />

  

<meta itemprop="name" content="Python 第6天 方法">
<meta itemprop="description" content="方法 方法定义  用def关键字来申明方法。  def fac(num): result = 1 for n in range(1, num &#43; 1): result *= n return result m = int(input(&#39;m = &#39;)) n = int(input(&#39;n = &#39;)) print(fac(m) // fac(n) // fac(m - n)) Python可以重复定义方法（后面的声明覆盖前面的声明），调用时选取最后的声明。  def foo(): print(&#39;hello, world!">
<meta itemprop="datePublished" content="2020-06-06T17:51:56&#43;08:00" />
<meta itemprop="dateModified" content="2020-06-06T17:51:56&#43;08:00" />
<meta itemprop="wordCount" content="695">



<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python 第6天 方法"/>
<meta name="twitter:description" content="方法 方法定义  用def关键字来申明方法。  def fac(num): result = 1 for n in range(1, num &#43; 1): result *= n return result m = int(input(&#39;m = &#39;)) n = int(input(&#39;n = &#39;)) print(fac(m) // fac(n) // fac(m - n)) Python可以重复定义方法（后面的声明覆盖前面的声明），调用时选取最后的声明。  def foo(): print(&#39;hello, world!"/>


<meta property="og:title" content="Python 第6天 方法" />
<meta property="og:description" content="方法 方法定义  用def关键字来申明方法。  def fac(num): result = 1 for n in range(1, num &#43; 1): result *= n return result m = int(input(&#39;m = &#39;)) n = int(input(&#39;n = &#39;)) print(fac(m) // fac(n) // fac(m - n)) Python可以重复定义方法（后面的声明覆盖前面的声明），调用时选取最后的声明。  def foo(): print(&#39;hello, world!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dom075.github.io/python/python_%E7%AC%AC6%E5%A4%A9_%E6%96%B9%E6%B3%95/" />
<meta property="article:published_time" content="2020-06-06T17:51:56+08:00" />
<meta property="article:modified_time" content="2020-06-06T17:51:56+08:00" />



  <link type="text/css"
        rel="stylesheet"
        href="/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="/css/hyde.css">

  


  <link type="text/css" rel="stylesheet" href="/css/blog.css">

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <img src="/images/profile/Jed_Wu_Cartoon.JPG" class="img-circle img-headshot center" alt="Profile Picture">
        </div>
        
      

      <h1>Jed Wu</h1>

      
      <p class="lead">个人技术博客</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://dom075.github.io/">Home</a>
        </li>
        <li>
          <a href="/java/">Java</a>
        </li><li>
          <a href="/javascript/">JavaScript</a>
        </li><li>
          <a href="/python/">Python</a>
        </li><li>
          <a href="/about/">About</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="#" rel="me" title="Linkedin" target="_blank">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
      
      <a href="#" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="#" rel="me" title="Twitter" target="_blank">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1>Python 第6天 方法</h1>

  <div class="post-date">
    <time datetime="2020-06-06T17:51:56&#43;0800">Jun 6, 2020</time> &middot; 4 min read
  </div>

  <hr>
<h2 id="方法">方法</h2>
<h3 id="方法定义">方法定义</h3>
<ol>
<li>用def关键字来申明方法。</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fac</span>(num):
    result <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, num <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
        result <span style="color:#f92672">*=</span> n
    <span style="color:#66d9ef">return</span> result


m <span style="color:#f92672">=</span> int(input(<span style="color:#e6db74">&#39;m = &#39;</span>))
n <span style="color:#f92672">=</span> int(input(<span style="color:#e6db74">&#39;n = &#39;</span>))

<span style="color:#66d9ef">print</span>(fac(m) <span style="color:#f92672">//</span> fac(n) <span style="color:#f92672">//</span> fac(m <span style="color:#f92672">-</span> n))
</code></pre></div><ol start="2">
<li>Python可以重复定义方法（后面的声明覆盖前面的声明），调用时选取最后的声明。</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">foo</span>():
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;hello, world!&#39;</span>)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">foo</span>():
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;goodbye, world!&#39;</span>)
<span style="color:#75715e"># 下面的代码会输出什么呢？</span>
foo()
<span style="color:#e6db74">&#39; (输出：goodbye, world!）</span>
</code></pre></div><p>3.Python中可以在函数内部再定义函数</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">foo</span>():
    b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hello&#39;</span>

    <span style="color:#75715e"># Python中可以在函数内部再定义函数</span>
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bar</span>():
        c <span style="color:#f92672">=</span> True
        <span style="color:#66d9ef">print</span>(a)

    bar()
foo()   
</code></pre></div><h3 id="参数">参数</h3>
<h4 id="默认值参数">默认值参数</h4>
<p>参数可以带默认值，调用方法而不传入参数值时，按照参数次序使用默认参数值。<br>
因此python不需要重载。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">addtest</span>(a<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, c<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>):
    <span style="color:#e6db74">&#34;&#34;&#34;三个数相加&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b <span style="color:#f92672">+</span> c

<span style="color:#66d9ef">print</span>(addtest())
<span style="color:#66d9ef">print</span>(addtest(<span style="color:#ae81ff">1</span>))
<span style="color:#66d9ef">print</span>(addtest(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>))
<span style="color:#66d9ef">print</span>(addtest(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>))
<span style="color:#75715e"># 传递参数时可以不按照设定的顺序进行传递</span>
<span style="color:#66d9ef">print</span>(add(c<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>, a<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>))
<span style="color:#e6db74">&#39;（分别输出 60 51 33 6 350）&#39;</span>
</code></pre></div><p>注意，以上方法只适用于带默认值参数的方法。不带默认值的一般函数，这样写是错的。<br>
默认参数的坑：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_end</span>(L<span style="color:#f92672">=</span>[]):
    L<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;END&#39;</span>)
    <span style="color:#66d9ef">return</span> L

f <span style="color:#f92672">=</span> add_end([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>])
<span style="color:#66d9ef">print</span>(f)
f <span style="color:#f92672">=</span> add_end([<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#ae81ff">3</span>])
<span style="color:#66d9ef">print</span>(f)
f <span style="color:#f92672">=</span> add_end()
<span style="color:#66d9ef">print</span>(f)
f <span style="color:#f92672">=</span> add_end()
<span style="color:#66d9ef">print</span>(f)
<span style="color:#75715e">#输出：</span>
[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;END&#39;</span>]
[<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;END&#39;</span>]
[<span style="color:#e6db74">&#39;END&#39;</span>]
[<span style="color:#e6db74">&#39;END&#39;</span>, <span style="color:#e6db74">&#39;END&#39;</span>]
</code></pre></div><p>原因：参数的默认值在函数定义的时候就被创建，是个[]对象,有单独内存空间，每次调用的时候，如果使用了这个默认值，并且改变了，那这个对象就被改变了！</p>
<p><!-- raw HTML omitted -->注意：默认参数的值必须要是不可变的值！比如str,int,none,tuple<!-- raw HTML omitted --></p>
<h4 id="可变参数">可变参数：</h4>
<p>就是把参数当作一个可变长的Array，所以调用时不必在意需要几个参数。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># 在参数名前面的*表示args是一个可变参数</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(<span style="color:#f92672">*</span>args):
    total <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> val <span style="color:#f92672">in</span> args:
        total <span style="color:#f92672">+=</span> val
    <span style="color:#66d9ef">return</span> total
</code></pre></div><p>同理，在调用可变参数方法的时候，对于List/ruple，在参数前加个*，就可以把里面所有元素当坐所有参数传进去。如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">nums <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
  add(<span style="color:#f92672">*</span>nums)
</code></pre></div><p>注意，调用方法的时候，如果参数个数不对，python会检查出来报错，但是类型是否正确，要我们自己检查，可以用到isinstance()这个内置方法：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">my_abs</span>(x):
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> isinstance(x, (int, float)):
        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">TypeError</span>(<span style="color:#e6db74">&#39;bad operand type&#39;</span>)
    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#66d9ef">return</span> x
</code></pre></div><h4 id="关键字参数">关键字参数</h4>
<p>比如你正在做一个用户注册的功能，除了用户名和年龄是必填项外，其他都是可选项，利用关键字参数来定义这个函数就能满足注册的需求。<br>
**kw</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">person</span>(name, age, <span style="color:#f92672">**</span>kw):
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;city&#39;</span> <span style="color:#f92672">in</span> kw:
        <span style="color:#75715e"># 有city参数</span>
        <span style="color:#66d9ef">pass</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;job&#39;</span> <span style="color:#f92672">in</span> kw:
        <span style="color:#75715e"># 有job参数</span>
        <span style="color:#66d9ef">pass</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;name:&#39;</span>, name, <span style="color:#e6db74">&#39;age:&#39;</span>, age, <span style="color:#e6db74">&#39;other:&#39;</span>, kw)
</code></pre></div><p>* + arg（也叫命名关键字参数）<br>
注意：</p>
<ol>
<li>*必须要加，不然会当作一般的位置参数来处理。</li>
<li>命名关键字参数必须传入参数名。因为关键字参数本质就是一个dict。</li>
<li>如果函数定义中已经有了一个可变参数，后面跟着的命名关键字参数就不再需要一个特殊分隔符*了</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">person</span>(name, age, <span style="color:#f92672">*</span>, city, job):
    <span style="color:#66d9ef">print</span>(name, age, city, job)

person(<span style="color:#e6db74">&#39;Jack&#39;</span>, <span style="color:#ae81ff">24</span>, city<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Beijing&#39;</span>, job<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Engineer&#39;</span>)
<span style="color:#960050;background-color:#1e0010">输出：</span><span style="color:#e6db74">&#34;Jack 24 Beijing Engineer&#34;</span>

<span style="color:#75715e">#带可变参数就不要加*</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">person</span>(name, age, <span style="color:#f92672">*</span>args, city, job):
    <span style="color:#66d9ef">print</span>(name, age, args, city, job)
</code></pre></div><h4 id="参数组合">参数组合</h4>
<p>参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数。如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f1</span>(a, b, c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, <span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kw):
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;a =&#39;</span>, a, <span style="color:#e6db74">&#39;b =&#39;</span>, b, <span style="color:#e6db74">&#39;c =&#39;</span>, c, <span style="color:#e6db74">&#39;args =&#39;</span>, args, <span style="color:#e6db74">&#39;kw =&#39;</span>, kw)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f2</span>(a, b, c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, <span style="color:#f92672">*</span>, d, <span style="color:#f92672">**</span>kw):
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;a =&#39;</span>, a, <span style="color:#e6db74">&#39;b =&#39;</span>, b, <span style="color:#e6db74">&#39;c =&#39;</span>, c, <span style="color:#e6db74">&#39;d =&#39;</span>, d, <span style="color:#e6db74">&#39;kw =&#39;</span>, kw)
</code></pre></div><p>在函数调用的时候，Python解释器自动按照参数位置和参数名把对应的参数传进去。</p>
<pre><code>&gt;&gt;&gt; f1(1, 2)
a = 1 b = 2 c = 0 args = () kw = {}
&gt;&gt;&gt; f1(1, 2, c=3)
a = 1 b = 2 c = 3 args = () kw = {}
&gt;&gt;&gt; f1(1, 2, 3, 'a', 'b')
a = 1 b = 2 c = 3 args = ('a', 'b') kw = {}
&gt;&gt;&gt; f1(1, 2, 3, 'a', 'b', x=99)
a = 1 b = 2 c = 3 args = ('a', 'b') kw = {'x': 99}
&gt;&gt;&gt; f2(1, 2, d=99, ext=None)
a = 1 b = 2 c = 0 d = 99 kw = {'ext': None}
</code></pre><p>通过一个tuple和dict，你也可以调用上述函数</p>
<pre><code>&gt;&gt;&gt; args = (1, 2, 3, 4)
&gt;&gt;&gt; kw = {'d': 99, 'x': '#'}
&gt;&gt;&gt; f1(*args, **kw)
a = 1 b = 2 c = 3 args = (4,) kw = {'d': 99, 'x': '#'}
&gt;&gt;&gt; args = (1, 2, 3)
&gt;&gt;&gt; kw = {'d': 88, 'x': '#'}
&gt;&gt;&gt; f2(*args, **kw)
a = 1 b = 2 c = 3 d = 88 kw = {'x': '#'}
</code></pre><p>因为，可变参数的本质就是元组，关键字参数的本质是字典。</p>
<h3 id="空方法">空方法</h3>
<p>现在还没想好怎么写方法的代码，就可以先放一个pass，让代码能运行起来。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">nop</span>():
    <span style="color:#66d9ef">pass</span>
</code></pre></div><h3 id="返回多个值">返回多个值</h3>
<p>python的方法可以返回多个值，如下：（其实是返回了一个Tuple）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> math

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">move</span>(x, y, step, angle<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>):
    nx <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> step <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>cos(angle)
    ny <span style="color:#f92672">=</span> y <span style="color:#f92672">-</span> step <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>sin(angle)
    <span style="color:#66d9ef">return</span> nx, ny

x, y <span style="color:#f92672">=</span> move(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">60</span>, math<span style="color:#f92672">.</span>pi <span style="color:#f92672">/</span> <span style="color:#ae81ff">6</span>)    
</code></pre></div><h3 id="偏函数-所以简单总结functoolspartial">偏函数 所以，简单总结functools.partial</h3>
<p>作用是，把一个函数的某些参数给固定住（也就是设置默认值），注意使用偏函数之后，新函数名不要加def，因为函数名当作变量来用了</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">int2</span>(x, base<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>):
    <span style="color:#66d9ef">return</span> int(x, base)

<span style="color:#e6db74">&#34;把上面的代码用偏函数直接改成如下代码:&#34;</span>
<span style="color:#f92672">import</span> functools
int2 <span style="color:#f92672">=</span> functools<span style="color:#f92672">.</span>partial(int, base<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>) 
</code></pre></div><h3 id="模块">模块</h3>
<p>已经知道可以用Import导入模块，如果导入的模块当中有执行代码，那导入时就会被执行。<br>
要避免这个问题，就需要判断当前模块是不是正在执行的模块，如果是，则执行，否则不执行。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">foo</span>():
    <span style="color:#66d9ef">pass</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bar</span>():
    <span style="color:#66d9ef">pass</span>
<span style="color:#75715e"># __name__是Python中一个隐含的变量它代表了模块的名字</span>
<span style="color:#75715e"># 只有被Python解释器直接执行的模块的名字才是__main__</span>
<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;call foo()&#39;</span>)
    foo()
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;call bar()&#39;</span>)
    bar()
</code></pre></div><p><code>test.py</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> module3
<span style="color:#75715e"># 导入module3时 不会执行模块中if条件成立时的代码 因为模块的名字是module3而不是__main__</span>
</code></pre></div><h3 id="变量的作用域">变量的作用域</h3>
<ul>
<li>全局变量：在执行代码中定义的变量就是全局变量，可以在下面调用的方法里直接使用。</li>
<li>局部变量：在方法中的变量就是局部变量。局部变量可以在内嵌方法中被访问。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">foo</span>():
    b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hello&#39;</span>

    <span style="color:#75715e"># Python中可以在函数内部再定义函数</span>
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bar</span>():
        c <span style="color:#f92672">=</span> True
        <span style="color:#66d9ef">print</span>(a)
        <span style="color:#66d9ef">print</span>(b)
        <span style="color:#66d9ef">print</span>(c)

    bar()
    <span style="color:#75715e"># print(c)  # NameError: name &#39;c&#39; is not defined</span>

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
    <span style="color:#75715e"># print(b)  # NameError: name &#39;b&#39; is not defined</span>
    foo()
</code></pre></div><p>通过函数来修改全局变量：
错误方法：(实际上是新定义了一个局部变量a)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">foo</span>():
    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>
    <span style="color:#66d9ef">print</span>(a)  <span style="color:#75715e"># 200</span>

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
    foo()
    <span style="color:#66d9ef">print</span>(a)  <span style="color:#75715e"># 100</span>
</code></pre></div><p>正确方法：要加上<strong>global</strong>才可以(内嵌方法要更改外部方法的变量值，要加上<strong>nonlocal</strong>关键字)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">foo</span>():
    <span style="color:#66d9ef">global</span> a
    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>
    <span style="color:#66d9ef">print</span>(a)  <span style="color:#75715e"># 200</span>

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    a <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
    foo()
    <span style="color:#66d9ef">print</span>(a)  <span style="color:#75715e"># 200</span>
</code></pre></div><p>提示：开发中尽量少用全局变量。</p>
<h3 id="闭包">闭包</h3>
<p>Python 中通俗一点来说，如果在一个函数内部，嵌套了函数，这个内部函数对（非全局作用域）外部作用域的变量进行引用，那么这个内部函数称为闭包。闭包每次运行是能记住引用的外部作用域的变量的值。<br>
进一步理解，当一个函数是返回内嵌函数，也就是闭包的时候，之所以会记住外部函数的局部变量，是因为这个内部函数是不立即执行的，而是被真正调用的时候才执行。所以这必须要避免一个坑：<br>
<!-- raw HTML omitted -->【注意必坑】返回函数不要引用任何循环变量<!-- raw HTML omitted --><br>
因为这个循环变量已经在外部函数中循环执行了，到循环末尾值了，而不是初始值。这个要注意。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#闭包函数的实例</span>
<span style="color:#75715e"># outer是外部函数 a和b都是外函数的临时变量</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">outer</span>( a ):
     b <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
     <span style="color:#75715e"># inner是内函数</span>
     <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">inner</span>():
         <span style="color:#75715e">#在内函数中 用到了外函数的临时变量</span>
         <span style="color:#66d9ef">print</span>(a<span style="color:#f92672">+</span>b)
     <span style="color:#75715e"># 外函数的返回值是内函数的引用</span>
     <span style="color:#66d9ef">return</span> inner
 
<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
     <span style="color:#75715e"># 在这里我们调用外函数传入参数5</span>
     <span style="color:#75715e">#此时外函数两个临时变量 a是5 b是10 ，并创建了内函数，然后把内函数的引用返回存给了demo</span>
     <span style="color:#75715e"># 外函数结束的时候发现内部函数将会用到自己的临时变量，这两个临时变量就不会释放，会绑定给这个内部函数</span>
     demo <span style="color:#f92672">=</span> outer(<span style="color:#ae81ff">5</span>)
     <span style="color:#75715e"># 我们调用内部函数，看一看内部函数是不是能使用外部函数的临时变量</span>
     <span style="color:#75715e"># demo存了外函数的返回值，也就是inner函数的引用，这里相当于执行inner函数</span>
     demo() <span style="color:#75715e"># 15</span>
 
     demo2 <span style="color:#f92672">=</span> outer(<span style="color:#ae81ff">7</span>)
     demo2()<span style="color:#75715e">#17</span>
</code></pre></div>
</div>


  </main>

  <footer>
  <div>
    &copy; Jed Wu 2020

    &middot; <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank">CC BY-SA 4.0</a>

    
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  <script src="/js/blog.js"></script>

  
</body>
</html>
